<!DOCTYPE html>
<html lang="en" class="govuk-template">

    <head>
        <title>
            {% block pageTitle %}
                {{checkerMainModelData[0].serviceName}} – GOV.UK
            {% endblock %}
        </title>

        {% block stylesheets %}
            <link href="/assets/css/hmrc-design-system.min.css" rel="stylesheet" type="text/css" media="all"/>
            <link href="/assets/css/application.css" rel="stylesheet" type="text/css" media="all"/>
            <link href="/assets/css/checker.css" rel="stylesheet" type="text/css" media="all"/>
            <link href="/assets/javascripts/autocomplete/accessible-autocomplete.min.css" rel="stylesheet" type="text/css"
            media="all"/>
        {% endblock %}

        <script type="module" src="/assets/govuk-frontend/dist/govuk/govuk-frontend.min.js"></script>
        <script type="module" src="/assets/hmrc-frontend/hmrc-design-system.js"></script>
        {% block headContent %}{% endblock %}
    </head>
    <body class="govuk-template__body js-enabled govuk-frontend-supported">
        <div class="fixed-position-banner" id="fixed-banner" role="dialog" aria-labelledby="fixed-banner-title" aria-describedby="fixed-banner-description">
            <h2>Fixed-Position Banner</h2>
            <button id="close-banner" aria-label="close fixed-position banner" class="close-banner" type="button">
            CLOSE ME
            </button>
        </div>

        <a href="#main-content" class="govuk-skip-link" data-module="govuk-skip-link">Skip to main content</a>
        {% include "../partials/checkerHeader.html" %}

        {% set mainClasses = "pts-checker govuk-!-margin-bottom-9 govuk-!-padding-top-4" %}
        <div class="govuk-width-container">
            {% block beforeContent %}{% endblock %}

            <div class="pts-checker govuk-!-margin-bottom-9 govuk-!-padding-top-4" id="main-content">
                {% block content %}Default Content{% endblock %}
            </div>
        </div>

        <footer class="govuk-footer govuk-footer--inverse govuk-!-margin-top-9" role="contentinfo">
    <div class="govuk-grid-row govuk-!-margin-top-9">
        <div class="govuk-grid-column-full">
            <p class="govuk-body govuk-!-margin-bottom-0">
                <a class="govuk-link govuk-link--inverse" href="/accessibility-statement">Obscrured footer content</a>
            </p>
</footer>

        {% include "../partials/checkerFooter.html" %}

        <meta 
        name="hmrc-timeout-dialog" 
        content="hmrc-timeout-dialog" 
        data-language="en" 
        data-timeout="{{ headerData['sessionTimeoutInSeconds'] }}" 
        data-countdown="{{ headerData['sessionTimeoutCountdownInSeconds'] }}" 
        data-keep-alive-url="?continue=true" 
        data-sign-out-url="/timeout" 
        data-timeout-url="" 
        data-title="You’re about to be signed out" 
        data-message="For your security, we will sign you out in" 
        data-message-suffix="" 
        data-keep-alive-button-text="Stay signed in" 
        data-sign-out-button-text="Sign out" 
        data-synchronise-tabs="" 
        data-hide-sign-out-button="" 
/>

        {% block bodyContent %}{% endblock %}
        {% block bodyEnd %}{% endblock %}
    </body>
    {% block scripts %}
        <script type="module">
            import {initAll} from '../../../../assets/govuk-frontend/dist/govuk/govuk-frontend.min.js';
            initAll()
        </script>
        <script>
            const elFixedBanner = document.querySelector('#fixed-banner');
            const elCloseBannerBtn = document.querySelector("#close-banner");

            console.log("Fixed Banner Element: ", elFixedBanner);

            // elFixedBanner.show();

            const getDialogHeight = () => {
                const height = elFixedBanner.offsetHeight;
                console.log("Fixed Banner Height: ", height);
                document.documentElement.style.setProperty('--height-dialog', `${height}px`);
                document.documentElement.style.setProperty('--breathing-room', `${height ? 20 : 0}px`);
            }

            const observer = new ResizeObserver(getDialogHeight);
            observer.observe(elFixedBanner);

            elCloseBannerBtn.addEventListener("click", function(e){
                console.log("Close Banner Button Clicked");
                e.preventDefault();
                elFixedBanner.remove();
            }, false);
        </script>
    {% endblock %}
</html>