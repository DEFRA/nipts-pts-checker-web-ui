!function(u){function i(e,r){var t=e.text();if(0<t.length){e.remove();var n=u("<li></li>").appendTo(r);u('<a href="#"></a>').appendTo(n).text(t)}}function t(e,r){(r.data("replace-pagelevel-error")||r.data("replace-pagelevel-error-contains"))&&(u("p",e).length<1&&u("p",r).length<1&&u(e).text()===r.text()||0<u("p",e).length&&0<u("p",r).length&&u("p",e).text()===u("p",r).text()||0<u("p",e).length&&u("p",e).text()===u(r).text()||0<u("p",r).length&&u(e).text()===u("p",r).text()||(e.length<1&&((e=u("<div></div>")).addClass("error itemLevel govuk-error-message show"),e.attr("role","alert"),e.attr("aria-hidden","false"),e.insertBefore($errorField)),1<e.length&&e.not(":eq(0)").remove(),u(".error.pageLevel[tabindex]").removeAttr("tabindex"),e.empty().append(r.html())))}u.fn.govInline=function(){return this.each(function(e,r){u(r).addClass("govuk-!-display-inline")})},u.fn.govHeading=function(t){return this.each(function(e,r){u(r).addClass("govuk-heading-"+t)})},u.fn.govFormGroup=function(){return this.each(function(e,r){u(r).addClass("govuk-form-group")})},u.fn.govLabel=function(){return this.each(function(e,r){u(r).addClass("govuk-label")})},u.fn.govLink=function(){return this.each(function(e,r){u(r).addClass("govuk-link")})},u.fn.govTextInput=function(){return this.each(function(e,r){var t=u(r),n=t.closest(".entry-item,.attrEntry"),o=n.find("label");t.not(":checkbox,:radio").addClass("govuk-input"),n.govFormGroup(),o.govLabel()})},u.fn.govRadio=function(){return this.each(function(e,r){var t=u(r);t.addClass("govuk-radios__item"),t.parent().addClass("govuk-radios"),u('input[type="radio"]',t).addClass("govuk-radios__input"),u("label",t).addClass("govuk-radios__label")})},u.fn.govErrorSummary=function(){return this.each(function(e,r){var a=u(r);a.addClass("govuk-error-summary").attr("aria-labelledby","error-summary-title"),a.onAttributeChange("style",function(){var e=0===a.children().length,r=u('<h2 class="govuk-error-summary__title" id="error-summary-title">There is a problem</h2>'),t=u('<div class="govuk-error-summary__body"></div>'),n=u('<ul class="govuk-list govuk-error-summary__list"></ul>');if(a.is(":hidden"))return a.empty(),void a.append("<p></p>");if(e){var o=a.contents().filter(function(){return 3===this.nodeType});t.appendTo(a),n.appendTo(t),i(o,n)}else u("p",a).is(":empty")||(t.appendTo(a),n.appendTo(t),u("p",a).each(function(e,r){i(u(r).contents().filter(function(){return 3===this.nodeType}),n)}));0===a.find(".govuk-error-summary__title").length&&r.prependTo(a),0===a.find(".govuk-error-summary__body").length&&(t.appendTo(a),n.appendTo(t)),u(".error.itemLevel").filter(":visible").toggleGovErrorMessage()})})},u.fn.toggleGovErrorMessage=function(){return this.each(function(e,r){var t=u(r),n=t.closest(".govuk-form-group"),o=u("input,textarea",n);t.find(".govuk-visually-hidden").remove();var a=t.text();if(t.is(":visible")&&0<a.length){0===t.find("p").length&&t.wrapInner('<p class="govuk-!-margin-0"></p>'),t.prepend('<span class="govuk-visually-hidden">Error:</span>'),n.addClass("govuk-form-group--error"),o.addClass("govuk-input--error");var i=u(".govuk-error-summary");0<i.find(":visible").length||(1===i.length?i.show():u("#requiredFieldMissing").show().attr("aria-hidden","false")),t.addItemErrorToSummary()}else n.removeClass("govuk-form-group--error"),o.removeClass("govuk-input--error"),t.removeItemErrorFromSummary()})},u.fn.govErrorMessage=function(){return this.each(function(e,r){var t=u(r);t.addClass("govuk-error-message"),t.find("p").removeClass("govuk-body").addClass("govuk-!-margin-0");var n=0===t.closest(".entry-item").length?"aria-hidden":"style";t.onAttributeChange(n,function(e){e.disconnect(),t.toggleGovErrorMessage(),e.connect()}),t.onContentChange(function(e){e.disconnect(),t.toggleGovErrorMessage(),e.connect()})})},u.fn.govErrorMessageDynamicReplacement=function(){return this.each(function(e,r){u(".govuk-body","[data-replace-itemlevel-error],[data-replace-itemlevel-error-contains],[data-replace-pagelevel-error],[data-replace-pagelevel-error-contains]").removeClass("govuk-body"),u("[data-replace-itemlevel-error][data-error-fields],[data-replace-itemlevel-error-contains][data-error-fields]").each(function(){var e=u(this);u(e.data("error-fields")).each(function(){!function(e,r){r.data("replace-itemlevel-error")&&(e=e.filter(function(){return u("p",this).text()===r.data("replace-itemlevel-error")}),0<u("p",e).length&&u("p",e).text()!==r.text()&&e.empty().append(r.html()));r.data("replace-itemlevel-error-contains")&&(e=e.filter(':contains("'+r.data("replace-itemlevel-error-contains")+'")'),0<u("p",e).length&&u("p",e).text()!==r.text()&&e.empty().append(r.html()))}(u(this).closest("li").find(".error.itemLevel"),e)})}),u("[data-replace-pagelevel-error-contains][data-error-fields]").each(function(){var e=u(this),r=u('.error.pageLevel ul li:contains("'+e.data("replace-pagelevel-error-contains")+'")');0<r.length&&(r.each(function(){"hidden"!==u(this).attr("hidden")&&u(this).attr("hidden","hidden")}),u(e.data("error-fields")).each(function(){t(u(this).closest("li").find(".error.itemLevel"),e)}))}),u("[data-replace-pagelevel-error][data-error-fields]").each(function(){var e=u(this),r=u(".error.pageLevel ul li").filter(function(){return u(this).text()===e.data("replace-pagelevel-error")});0<r.length&&(r.attr("hidden","hidden"),u(e.data("error-fields")).each(function(){t(u(this).closest("li").find(".error.itemLevel"),e)}))})})},u.fn.addItemErrorToSummary=function(){return this.each(function(e,r){var i=u(r),l=u(".govuk-error-summary:visible .govuk-error-summary__list"),s=i.find("p");0===s.length&&(s=i),s.each(function(e){var r=u(this);if(0!==r.text().length){var t=i.attr("id");void 0===t&&(t=function(){for(var e=[],r=0;r<256;r++)e[r]=(r<16?"0":"")+r.toString(16);var t=crypto.getRandomValues(new Uint8Array(16));return t[6]=15&t[6]|64,t[8]=63&t[8]|128,e[t[0]]+e[t[1]]+e[t[2]]+e[t[3]]+"-"+e[t[4]]+e[t[5]]+"-"+e[t[6]]+e[t[7]]+"-"+e[t[8]]+e[t[9]]+"-"+e[t[10]]+e[t[11]]+e[t[12]]+e[t[13]]+e[t[14]]+e[t[15]]}(),i.attr("id",t));var n=u('a[href="#'+t+'"]'),o=u("<li></li>").appendTo(l),a=u("<a></a>").appendTo(o);n.length<s.length?(a.data("id","error-"+t),a.attr("href","#"+t)):a=u(n[e]),a.text()!==r.text()&&(l.closest('[aria-hidden="true"]').attr("aria-hidden","false"),a.text(r.text()))}})})},u.fn.removeItemErrorFromSummary=function(){return this.each(function(e,r){var t=u(r),n=u(".govuk-error-summary"),o=u(".govuk-error-summary__list",n);u('a[href="#'+t.attr("id")+'"]',o).closest("li").remove(),o.removeEmptyChildren(),0==o.children().length&&n.hide()})},u.fn.govButtonGroup=function(){return this.each(function(e,r){u(r).addClass("govuk-button-group")})},u.fn.govButton=function(n){return this.each(function(e,r){var t=n&&0<n.length?" govuk-button--"+n:"";u(r).addClass("govuk-button"+t)})},u.fn.govBody=function(){return this.each(function(e,r){u(r).addClass("govuk-body")})},u.fn.govHint=function(){return this.each(function(e,r){u(r).addClass("govuk-hint")})},u.fn.removeEmptyChildren=function(){return this.each(function(e,r){u(r).children().length&&(u(r).children().each(function(e,r){u(r).removeEmptyChildren()}),u(r).children(":empty").not("area,base,br,col,embed,hr,img,input,keygen,link,meta,param,source,track,wbr").remove())})},u(function(){u("p#pageHeader").govHeading("xl"),u("p:not(#pageHeader)").govBody(),u("button").govButton(),u(".buttons").govButtonGroup(),u("body").addClass("govuk-template__body"),u("html").addClass("govuk-template"),u(".govuk-inset-text :contains(last updated)").addClass("govuk-body-s"),u("input").filter('[type="text"],[type="password"],[type="email"],:not([type])').govTextInput(),u(".error.pageLevel").govErrorSummary(),u(".error.itemLevel").govErrorMessage()})}(jQuery),function(i){window.URLBuilder=function(e){this.url=e,this.urlParams={},this.appendQuery=function(e,r){if(!e||0==e.length)return this;if(!r||0==r.length)return this;var t=this.urlParams[e];return t||(this.urlParams[e]=t=[]),t.push(r),this},this.build=function(){var e=function(e){var r="?",t="";for(var n in e)for(var o=e[n],a=0;a<o.length;++a)t+=r+encodeURIComponent(n)+"="+encodeURIComponent(o[a]),r="&";return t}(this.urlParams);return this.url+e};var r=e.indexOf("?");if(0<=r){this.url=e.substring(0,r);for(var t=e.substring(r+1).split("&"),n=0;n<t.length;++n){var o=t[n].split("=");this.appendQuery(decodeURIComponent(o[0]),decodeURIComponent(o[1]))}}},i.fn.onAttributeChange=function(e,r){return this.onChange({attributes:!0,attributeFilter:e.split(",")},r)},i.fn.onContentChange=function(e){return this.onChange({childList:!0},e)},i.fn.onTextChange=function(e){return this.onChange({characterData:!0},e)},i.fn.onChange=function(o,a){return this.each(function(e,t){function r(e,r){a({target:r,connect:function(){n.observe(t,o)},disconnect:function(){n.disconnect()}})}var n=null;(n=n||function(r){return MutationObserver=window.MutationObserver||window.WebKitMutationObserver,new MutationObserver(function(e){i.each(e,r)})}(r)).observe(t,o),r(0,t)})}}(jQuery),function(a){a(function(){var e=a("#b2cEndSessionEndpoint").val(),r=a("#postLogoutState").val()||"",t=new URLBuilder(e).appendQuery("post_logout_redirect_uri",e).build(),n=new URLBuilder(a("#postLogoutRedirectUri").val()).appendQuery("state",r).build();a("#signoutPageLink").attr("href",n);var o=a('<iframe src="'+t+'" class="hidden"></iframe>');o.on("load",function(){o.off("load"),window.location.replace(n)}),a("body").after(o)})}(jQuery);